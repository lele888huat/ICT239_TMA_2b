{% extends "base.html" %}

{% block title %}Details: {{ book.title }}{% endblock %}

{% block page_heading %}
Book Details
{% endblock %}

{% block content %}

<div class="row">
    <div class="col-lg-12">
        <div class="book-card p-3 mb-2">
            <div class="row no-gutters align-items-start">

                {# Column 1: Book Cover Image #}
                <!-- Set column sizing to col-12 for full width on mobile, col-md-2 for fixed width on desktop -->
                <div class="col-12 col-md-2 px-0 text-center">
                    
                    {% if book.url %}
                    <img src="{{ book.url }}" class="img-fluid" alt="{{ book.title }}">
                    {% else %}
                    <div class="no-image-placeholder d-flex flex-column align-items-center justify-content-center w-100">
                        <i class="fas fa-book fa-2x text-muted"></i>
                        <p class="mt-2 mb-0 text-muted small">Image NA</p>
                    </div>
                    {% endif %}
                    
                </div>

                {# Column 2: Details and Description #}
                <!-- Set column sizing to col-12 for mobile, col-md-10 for desktop, and added flex-column for vertical layout -->
                <div class="col-12 col-md-10 d-flex flex-column">

                    {# 1. Book Title: Changed mb-1 to mb-0 to pull title closer to author #}
                    <h4 class="book-title-header mb-0">
                        {{ book.title }}
                    </h4>

                    {# 2. Author Name: Changed from <p> to <h4> to match styling in book_titles #}
                    <h4 class="book-title-header mb-3 font-weight-normal">
                        By {{ book.authors|join(', ') }}
                    </h4>

                    {# 3. Categories/Genres: Changed mb-1 to mb-0 for tight grouping #}
                    <p class="mb-0 small">
                        Category: {{ book.category }}
                        {% for genre in book.genres %}
                        , {{ genre }}
                        {% endfor %}
                    </p>

                    {# 4. Pages: Changed mb-2 to mb-0 for tight grouping #}
                    <p class="mb-0 small">
                        Pages: {{ book.pages }}
                    </p>

                    {# 5. Copies and Available: Changed mb-2 to mb-4 for gap before Description #}
                    <p class="mb-4 small">
                        Copies: {{ book.copies }} Available: {{ book.available }}
                    </p>

                    {# 6. Description Content: Added mt-3 for more space above description header #}
                    {% for paragraph in book.description %}
                    <p class="text-muted">{{ paragraph }}</p>
                    {% endfor %}

                    {# 7. Back Button #}
                    <div class="mt-4 text-right">
                        <a href="{{ url_for('book_titles') }}" class="btn btn-sm btn-info">
                            Back to Book Titles
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}
